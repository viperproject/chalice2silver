class Predicate {
	var x: int

	predicate V {
		acc(x)
	}
	

	
	method foldV()
		requires acc(x)
		ensures V
	{ fold V }
	
	method failFoldV1()
	{ fold V /* @Error 730 */ }
	
	method failFoldV2()
		requires acc(x)
		ensures V
		ensures acc(x) /* @Error 330 */
	{ fold V }
	
	
	
	method unfoldV()
		requires V
		ensures acc(x)
	{ unfold V }
	
	method failUnfoldV1()
	{ unfold V /* @Error 830 */}
	
	method failUnfoldV2()
		requires V
		ensures acc(x)
		ensures V /* @Error 330 */
	{ unfold V }
	

	
	function unfoldingV(): int
		requires V
	{ unfolding V in x }
	
	function failUnfoldingV(): int
	{ unfolding V in x /* @MissingError 830 */ }   // UNSOUND succeeds in Chalice2SIL+Silicon
	
	
	
	method useUnfoldingV() returns (r: int)
		requires acc(x)
		ensures acc(x) && r == x
	{
		fold V
		r := unfoldingV()
		unfold V
	}
	
	method failUseUnfoldingV() returns (r: int)
		requires acc(x)
		ensures acc(x) && r == x
	{ r := unfoldingV()	/* @Error 230 */ }
}