// https://bitbucket.org/mschwerhoff/syxc-npm/issue/6/waitlevel-unsoundness

class Test {
  method test02() {
    var x: Test := new Test

    share x

    acquire x
    release x
    //:: ExpectedError(ass.violated:ass.false)
    assert false
  }

  method test03() {
    var x: Test := new Test
    var y: Test := new Test

    share x
    share y above x

    acquire x
    acquire y

    //:: ExpectedError(ass.violated:ass.false)
    assert 1 == 2
  }

  method test01() {
    var x: Test := new Test
    var y: Test := new Test

    share x
    share y above x

//    assert false; /* fails */
    acquire x
//    assert false; /* fails */

    acquire y
    release y
    
    //:: ExpectedError(ass.violated:ass.false)
    assert 47 == 11
  }
}