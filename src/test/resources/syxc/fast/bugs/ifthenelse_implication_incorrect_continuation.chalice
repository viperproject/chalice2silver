/* There was a bug in the execution of else-branches in situations
 * where it could be proven that the else-branch was not executable, i.e.
 * that the if-guard would always evaluate to true.
 * In such a situation Syxc should discontinue the current execution branch,
 * but instead it only skipped the else-branch and continued from there on,
 * i.e. the remaining code was executed without executing either if- nor
 * else-branch.
 * The bug was quite hard to uncover, but Uri's AVLTree eventually did.
 */

class Test {
	var target: Test

	predicate V {
		acc(this.target)
		&& (this.target != null ==> true)
	}

	method foo()
		requires V
		ensures V
	{
		unfold V
		
		if (target == null) {
			fold V
		} else {
			fold V
		}

		assert acc(V)
	}
}