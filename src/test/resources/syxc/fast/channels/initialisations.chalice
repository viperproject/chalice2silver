channel ChTrue() where true

class InitialisationTests {
	/* NOTE: New channels are placed above waitlevel, whereas all other new
	 *       objects are placed at lockbottom.
	 */
	method fails() {
		var ch: ChTrue := new ChTrue
		assert ch.mu != lockbottom
		assert waitlevel << ch.mu
		
		var t: InitialisationTests := new InitialisationTests
		assert t.mu == lockbottom
		//:: ExpectedError(ass.violated:ass.false)
		assert waitlevel << t.mu
	}
	
	method succeeds() {
		var ch: ChTrue := new ChTrue
		assert ch.mu != lockbottom
		assert waitlevel << ch.mu
		
		var t: InitialisationTests := new InitialisationTests
		assert t.mu == lockbottom
	}
}