class A
{
  tracked ghost var p: A
  var q: B
  
  predicate r { true }
}

class B
{
  method m(x:A)
    requires ~(C.f) - (x.p).~(A.q) == ~(A.f)
	requires acc((x.p).~(A.p)) && rd*(~(A.p)) && acc((x.p).~(A.q), 50)
	requires (x.p).~(A.p) == ~(A.p)
	ensures ~(A.r) == x.~(A.p)
  {
    assert ~(C.f) - (x.p).~(A.q) == ~(A.f)
	assert ~(A.p) == x.~(A.p)
	assert (x.p).~(A.p) == ~(A.p)
  }
}

