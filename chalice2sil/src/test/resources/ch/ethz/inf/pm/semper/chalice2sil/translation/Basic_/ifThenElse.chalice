class Main {
  var x: int
  var t: Main

  method main(b: bool) returns (a: int)
    requires rd(t) && t != null
    requires b ==> acc(t.x)
    ensures rd(t)
    ensures b ? (acc(t.x) && t.x == a) : a < 0
  {
    if (b) {
      a := t.x
    } else {
      a := -1
    }
  }
}
