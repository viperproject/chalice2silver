/* There was a bug in the production of Implies assertions, such that it was
 * not checked if the antecedent can be refuted. Hence, implications with an
 * equivalent antecedent failed if consequents depended on one another.
 */
class Cell{
	var x: int
	var c: Cell

	predicate valid {
		acc(this.c)
		// && (this.c != null ==> acc(c.x, 50) && c.x == 0) /* Did verify */
		&& (this.c != null ==> acc(c.x, 50))
		&& (this.c != null ==> c.x == 0)     /* Didn't verify */
	}
	
	method foo()
		requires valid
		ensures valid
	{
		unfold valid
		fold valid
	}
}