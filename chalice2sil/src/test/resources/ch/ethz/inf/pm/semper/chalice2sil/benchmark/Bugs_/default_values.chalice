/* There was a bug in Syxc' handling of object instantiations (new C), such
 * that all fields where initialised to $null, regardless of there type.
 */

class BoolCell { var x: bool }
class IntCell { var x: int }
class TestCell { var x: Test }

class Test {
	method bool_cell() {
		var c: BoolCell := new BoolCell
		assert c.x == false || c.x == true /* Failed before */
	}
	
	method int_cell() {
		var c: IntCell := new IntCell
		assert c.x == 0 || c.x != 0
	}
	
	method test_cell() {
		var c: TestCell := new TestCell
		assert c.x == null || c.x != null
		assert c.x == null /* @Error 410 */
	}
}