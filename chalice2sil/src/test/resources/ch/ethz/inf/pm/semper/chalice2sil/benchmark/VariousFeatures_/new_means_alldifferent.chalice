/* [2012-07-10 Malte]:
 *   Instantiating a new object does not add the assumption, that the new
 *   object is different from all existing objects, which is why the
 *   postcondition of create() doesn't hold.
 *   The postcondition of create2() holds because Syxc is able to
 *   conclude from rd(this.value) && acc(res.value) that this and res
 *   must be different objects.
 */

class C {
	var value:int;

	method create() returns (res:C)
		ensures res!=this;	 /* @Fails */
	{
		res := new C;
	}
	
	method create2() returns (res:C)
		requires rd(value)
		ensures res!=this;
	{
		res := new C;
	}
}