% !TEX TS-program = xelatex
% !TEX encoding = UTF-8

\documentclass[11pt,a4paper]{article} % use larger type; default would be 10pt

\usepackage[fleqn]{amsmath}
\usepackage{amsthm,amsfonts}
\usepackage{amssymb} % Must be included BEFORE unicode!!!
\usepackage{fontspec} % Font selection for XeLaTeX; see fontspec.pdf for documentation
\defaultfontfeatures{Mapping=tex-text} % to support TeX conventions like ``---''
\usepackage{xunicode} % Unicode support for LaTeX character names (accents, European chars, etc)
\usepackage{xltxtra} % Extra customizations for XeLaTeX
\usepackage[math-style=ISO]{unicode-math}
%\usepackage{multicol}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{mdframed}


\setmainfont{Cambria} % set the main body font (\textrm), assumes Cambria is installed
\setsansfont{Calibri}
\setmonofont{Consolas}
\setmathfont{Cambria Math}

% other LaTeX packages.....
%\usepackage{savetrees}
\usepackage{fullpage}
%\usepackage{bussproofs}
\usepackage{fancyhdr}
\usepackage{listings}
\usepackage{color}
\setlength{\textwidth}{145mm}


% =====================================================
% ===== META INFORMATION ==============================
% =====================================================

\newcommand{\metaSemester}{FS11}
\newcommand{\metaCourseFull}{Translating Chalice into SIL}
\newcommand{\metaCourseShort}{SIL}
\newcommand{\metaCourse}{\metaCourseFull (\metaCourseShort)}
\newcommand{\metaSectionPrefix}{}
\newcommand{\metaAuthor}{Christian Klauser}
\newcommand{\metaAuthorNethz}{klauserc}
\newcommand{\metaAuthorLegi}{08-919-490}

\newcommand{\metaTitle}{Project Report}

% =====================================================
% =====================================================

\pagestyle{fancy}%
\renewcommand{\headrulewidth}{0pt}%
\renewcommand{\footrulewidth}{0pt}%
%\setlength{\headheight}{14pt}%
%\setlength{\footskip}{10pt}%
\fancyhead[L]{}%
\fancyhead[R]{}%
\fancyfoot[C]{\thepage}%

\usepackage{graphicx} % support the \includegraphics command and options
\usepackage{pdflscape}

\input{lib/haskell.tex}
\input{lib/chalice.tex}
\input{lib/sil.tex}

\lstnewenvironment{code}
    {\lstset{}%
      \csname lst@SetFirstLabel\endcsname}
    {\csname lst@SaveFirstLabel\endcsname}
\lstset{
      basicstyle=\small\ttfamily,
      flexiblecolumns=false,
      basewidth={0.5em,0.45em},
      tabsize=2,
      frame=single
%      literate={+}{{$+$}}1 {/}{{$/$}}1 {*}{{$*$}}1 {=}{{$=$}}1
%               {>}{{$>$}}1 {<}{{$<$}}1 {\\}{{$λ$}}1
%               {\\\\}{{\char`\\\char`\\}}1
%               {->}{{$\rightarrow$}}2 {>=}{{$≥$}}2 {<-}{{$\leftarrow$}}2
%               {<=}{{$≤$}}2 {=>}{{$\Rightarrow$}}2 
%               {\ .}{{$\circ$}}2 {\ .\ }{{$\circ$}}2
%               {>>}{{>>}}2 {>>=}{{>>=}}2
%               {|}{{$\mid$}}1               
    }
\lstset{tabsize=2}

%=========================================

\newcommand{\abs}[1]{{\left\lvert#1\right\rvert}}
\newcommand{\norm}[1]{{\left\lVert#1\right\rVert}}
\newcommand{\setw}[2]{\ensuremath{\left\{#1\:\middle|\:#2\right\}}}
\newcommand{\albool}{\ensuremath{\{0,1\}}}
\newcommand{\alab}{\ensuremath{\{a,b\}}}
\newcommand{\NN}{\ensuremath{\mathbb{N}}}
\newcommand{\RR}{\ensuremath{\mathbb{R}}}
\newcommand{\ZZ}{\ensuremath{\mathbb{Z}}}
\newcommand{\QQ}{\ensuremath{\mathbb{Q}}}
\newcommand{\CC}{\ensuremath{\mathbb{C}}}
\newcommand{\KK}{\ensuremath{\mathbb{K}}}
\newcommand{\MM}{\ensuremath{\mathbb{M}}}

\newcommand{\entails}{\ensuremath{\vdash\ }}
\renewcommand{\implies}{\ensuremath{\ \rightarrow\ }}

\newenvironment{sketch}{\begin{mdframed}[backgroundcolor=Salmon,hidealllines=true]}{\end{mdframed}}
\newcommand{\ldbrack}{⟦}
\newcommand{\rdbrack}{⟧}
\newcommand{\ch}[1]{\left\ldbrack{}#1\right\rdbrack_\text{Ch}}
\newcommand{\sil}[1]{\left\ldbrack{}#1\right\rdbrack_\text{SIL}}

%=========================================

\usepackage[parfill]{parskip} 
\usepackage{titlesec}
%\titleformat{\section}[display]{\normalfont\Large\bfseries}{Problem \thesection:}{1em}{}
\titleformat{\section}{\normalfont\Large\bfseries\sffamily}{\metaSectionPrefix \thesection\ }{0.5em}{}
\titleformat{\subsection}{\normalfont\large\bfseries\sffamily}{\thesubsection}{0.5em}{}
\titleformat{\subsubsection}{\normalfont\bfseries\sffamily}{\thesubsubsection}{0.4em}{}
\renewcommand{\thesection}{\arabic{section}.}
\renewcommand{\thesubsection}{\arabic{section}.\arabic{subsection}}
\renewcommand{\thesubsubsection}{\arabic{section}.\arabic{subsection}.\arabic{subsubsection}}

%=========================================

\title{{\Huge Translating Chalice into SIL}\\{\small\ }\\{\huge Problem Description}}
\author{Christian Klauser\\ \texttt{klauserc@student.ethz.ch}}
%\date{} % Activate to display a given date or no date (if empty),
         % otherwise the current date is printed 

\begin{document}
\maketitle

\begin{sketch}
\begin{itemize}
\item Use either \lstinline!acc(x.f,write)! (SIL toString) or \lstinline!acc(x.f,full)! (SIL API), not both!
\item Don't use abbreviated read fraction syntax \lstinline!rd(x.f)!, ever.
\end{itemize}
\end{sketch}

\input{src/introduction.tex}

\section{Background}
	\input{src/chalice-lang.tex}
	\input{src/sil-lang.tex}

\input{src/translation.tex}

\input{src/evaluation.tex}

\input{src/conclusion.tex}

\end{document}
